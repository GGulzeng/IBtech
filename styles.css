
:root{ --bg-image:none;  --line:#2e7d32; --accent:#2e7d32; --bg:#ffffff; --text:#111; }
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font-family:system-ui,Apple SD Gothic Neo,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
.topbar{display:flex;align-items:center;gap:12px;padding:16px 20px}
.title{margin:0 auto;font-size:48px;font-weight:700}
.back-btn{border:2px solid var(--line);background:transparent;padding:8px 12px;border-radius:8px;cursor:pointer}
.view{display:none;max-width:1100px;margin:0 auto;padding:24px}
.view.active{display:block}

.grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:48px;margin-top:56px}
.grid-2{display:grid;grid-template-columns:repeat(2,1fr);gap:48px;margin-top:56px}

.grade-card,.subject-card{
  border:3px solid var(--line);border-radius:12px;background:transparent;
  height:180px;font-size:48px;font-weight:600;cursor:pointer;
}
.figure-wrap{margin:12px 0}
.figure-box{
  border:3px solid var(--line);border-radius:12px;height:220px;
  display:flex;align-items:center;justify-content:center;font-size:36px;opacity:.9
}
.question-wrap{margin-top:12px}
.question{font-size:40px;border-left:6px solid var(--line);padding:16px 20px}
.choices-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:28px;margin-top:28px}
.choice-btn{border:2px solid var(--line);background:transparent;border-radius:10px;height:80px;font-size:32px;cursor:pointer}
.quiz-footer{margin-top:20px;display:flex;justify-content:flex-end}
.progress{font-size:20px;opacity:.8}

.modal{position:fixed;inset:0;background:rgba(0,0,0,.35);display:none;align-items:center;justify-content:center}
.modal.show{display:flex}
.modal-content{background:#fff;max-width:760px;width:92%;border:3px solid var(--line);border-radius:16px;padding:24px 24px 16px}
.badge{display:inline-block;padding:6px 12px;border-radius:999px;border:2px solid var(--line);margin-bottom:8px;font-weight:700}
.modal-answer{font-size:28px;margin:8px 0 6px}
.modal-explain{font-size:20px;opacity:.9}
.modal-controls{display:flex;align-items:center;gap:16px;margin-top:18px}
.next-btn{border:2px solid var(--line);background:transparent;padding:10px 16px;border-radius:10px;font-size:20px;cursor:pointer}
.timer{position:relative;flex:1;height:14px;background:#eee;border-radius:999px;overflow:hidden}
.timer-bar{position:absolute;left:0;top:0;height:100%;width:0;background:var(--accent)}
.timer-text{margin-left:8px;min-width:30px;text-align:right}
@media (max-width:800px){
  .title{font-size:36px}
  .grid-3,.grid-2{gap:24px}
  .grade-card,.subject-card{height:140px;font-size:36px}
  .figure-box{height:180px;font-size:24px}
  .choice-btn{height:70px;font-size:24px}
}

body.has-bg{background-image:var(--bg-image);background-size:cover;background-position:center;background-attachment:fixed}


.subject-card[data-subject="수학"]{display:none!important}

.figure-wrap,.figure-box{display:none!important}
.view{max-width:1280px}.question{font-size:56px;line-height:1.28;padding:22px 26px}.choices-grid{gap:32px}.choice-btn{height:110px;font-size:36px}
@media (max-width:800px){.question{font-size:40px}.choice-btn{height:90px;font-size:28px}}

.modal-content.bg-image{background:#fff url('assets/modal_result.jpg') center/cover no-repeat;border-color:transparent}
.modal-content.bg-image .badge{background:rgba(255,255,255,.85)}
.modal-content.bg-image .modal-explain{background:rgba(255,255,255,.85);padding:8px 10px;border-radius:8px}

.choice-btn{position:relative}.choice-btn.is-correct::after{content:"";position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:calc(100% - 14px);height:calc(100% - 14px);border:6px solid #e53935;border-radius:999px;pointer-events:none;box-sizing:border-box}


/* === HARD OVERRIDE (v9): 정답 PNG 배지 - 박스 '안쪽' 좌상단 고정 === */
:root{
  --badge-size: 64px;   /* 크기 조절: 44~72px 권장 */
  --badge-inset: 8px;   /* 안쪽 여백 조절: 4~16px 권장 */
}
.choice-btn{ position: relative !important; overflow: hidden !important; }

button.choice-btn.is-correct::after,
.choice-btn.is-correct::after{
  position: absolute !important;
  inset: auto !important;
  transform: none !important;
  animation: none !important;

  top: var(--badge-inset) !important;
  left: var(--badge-inset) !important;
  right: auto !important;
  bottom: auto !important;

  width: var(--badge-size) !important;
  height: var(--badge-size) !important;

  content: "" !important;
  background-image: url("assets/circle.png") !important;
  background-repeat: no-repeat !important;
  background-size: contain !important;
  background-position: center !important;

  border: none !important;
  outline: none !important;
  box-shadow: none !important;
  z-index: 9 !important;
}

/* 혹시 남아 있을 수 있는 ::before 효과 차단 */
.choice-btn.is-correct::before{ content:none !important; }


/* === MODAL UPGRADE (v9→modal-only) === */
:root{
  --modal-w: min(960px, 94vw);
  --modal-mark: clamp(120px, 18vw, 220px);
  --modal-text: clamp(20px, 2.6vw, 28px);
}
#answerModal .modal-dialog{ max-width: var(--modal-w); }
#answerModal .modal-content{ padding: 28px 28px 24px; border-radius: 16px; }

.modal-mark-wrap{ display:flex; align-items:center; justify-content:center; margin: 4px 0 12px; }
.modal-mark{ width: var(--modal-mark); height: var(--modal-mark); object-fit: contain; }

#answerModal .answer-text,
#answerModal .explain-text{ font-size: var(--modal-text); line-height: 1.55; }
